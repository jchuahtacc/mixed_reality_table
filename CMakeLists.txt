cmake_minimum_required(VERSION 3.1)
set(CMAKE_CXX_STANDARD 11)
project(mixed_reality_table)
find_package( OpenCV REQUIRED )
find_package( Boost REQUIRED system )

set(BUILD_TUIO_TESTS FALSE CACHE PATH "Build TUIO Test programs")

add_subdirectory(lib)
include_directories("${PROJECT_SOURCE_DIR}/lib")
add_executable(generate_markers src/generate_markers.cpp)
add_executable(generate_charuco src/generate_charuco.cpp)
add_executable(detect_markers src/detect_markers.cpp)
add_executable(calibrate_camera src/calibrate_camera.cpp)
add_executable(detect_blobs src/detect_blobs.cpp)
add_executable(detect_contours src/detect_contours.cpp)
add_executable(detect_bounds src/detect_bounds.cpp)
add_executable(server src/server.cpp)
add_executable(dump tuiotests/TuioDump.cpp)
add_executable(simulator tuiotests/SimpleSimulator.cpp)
target_link_libraries(generate_markers ${OpenCV_LIBS} ${Boost_LIBRARIES} mrtable tuio)
target_link_libraries(detect_markers ${OpenCV_LIBS}  ${Boost_LIBRARIES} mrtable tuio)
target_link_libraries(calibrate_camera ${OpenCV_LIBS} ${Boost_LIBRARIES} mrtable tuio)
target_link_libraries(generate_charuco ${OpenCV_LIBS} ${Boost_LIBRARIES} mrtable tuio)
target_link_libraries(detect_blobs ${OpenCV_LIBS} ${Boost_LIBRARIES} mrtable tuio)
target_link_libraries(detect_contours ${OpenCV_LIBS} ${Boost_LIBRARIES} mrtable tuio)
target_link_libraries(detect_bounds ${OpenCV_LIBS} ${Boost_LIBRARIES} mrtable tuio)
target_link_libraries(server ${OpenCV_LIBS} ${Boost_LIBRARIES} mrtable tuio )

if(BUILD_TUIO_TESTS)
    FIND_LIBRARY( GLUT_LIBRARY GLUT )
    FIND_LIBRARY( OpenGL_LIBRARY OpenGL )
    find_package( SDL REQUIRED )
    message("SDL: ${SDL_INCLUDE_DIR}")
    include_directories("${SDL_INCLUDE_DIR}")
    target_link_libraries(dump tuio)
    target_link_libraries(simulator ${GLUT_LIBRARY} ${OpenGL_LIBRARY} ${SDL_LIBRARY} tuio)
endif(BUILD_TUIO_TESTS)
